trgovac ima neograniceno resursa

svaki pusac ima neograniceno jednog resursa npr.
sibice, a druga dva mora uzeti od trgovca (duhan i papir)

trgovac u jednom ciklusu stavlja 2 razlicita resursa na stol i 
ceka da jedan pusac uzme te smije postaviti druga dva

u ovom zadatku imamo 4 procesa, jedan trgovac i tri pusaca
komunikaciju treba ostvariti redovima poruka i nesmije se 
koristiti sam red kao sinkronizacijski mehanizam nego moramo
koristiti raspodjeljeni lamport
to znaci da svaki proces mora imati lokalni sat
globalni sat ne postoji kao takav, on je samo pojam koji se koristi
za racunanje iduce vrijednosti lokalnog sata u procesu

1.
svaki proces ce imati svoj red poruka, moras napraviti svoj tip
poruke koji ce moci u red poruka
kada proces oce u k.o. generira poruku zahtjev(i, T(i)) 
te toj poruci pridjeli svoj logicki sat Ci (u procesu koji prima to je Tm)
poruka se salje svim ostalim procesima

2.
neki proces primi istu tu poruku zahtjev (i, T(i)) sa logickim
satom Tm i napravi 3 stvari
1. mora uskladiti sat sa Cj = max{Ci, Tm} + 1
2. stavlja zahtjev u svoj red
3. salje poruku odgovor(i, T(j))

3.
proces smije u k.o. kada je njegov zahtjev(i, T(i)) na pocetku
reda i kad je primio odgovore od svih procesa 

4.
proces izlazi iz k.o. i brise svoj zahtjev(i, T(i))
salje svim ostalim procesima izlazak(i, T(i))

5.
kad proces primi poruku izlazak brise iz svog reda taj zahtjev

poruka u redu se bira po prioritetu koji je slijedeći, prvo se gleda 
timestamp poruke zahtjeva, a onda process number i po tome se
odreduje tko moze u kriticni odsjecak

How they interact

A process decides it wants to enter the critical section → inserts its REQUEST into its local Lamport queue.

It sends a REQUEST message via the kernel message queue to all other processes.

Other processes receive the message via the kernel queue → insert the request into their own local Lamport queues.

Each process uses its local queue + REPLY messages to decide when it can enter the critical section.

When leaving → send RELEASE message → all processes remove that entry from their local queues.

The kernel queue is just the communication channel; it doesn’t enforce timestamps or priority.
The Lamport queue in each process is where the priority logic actually happens.
